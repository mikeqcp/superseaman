#version 130

uniform vec4 ambient;
uniform vec4 diffuse;
uniform vec4 specular;

uniform sampler2D textureMap0;
uniform int enableTexturing;

in vec4 inormal;
in vec2 iTexCoord;
in vec4 ilight;
in vec4 iv;

out vec4 pixelColor;

void main(void) {

	vec4 n = normalize(inormal);
	vec4 l = normalize(ilight);
	vec4 v = normalize(iv);
	vec4 r = normalize(reflect(-l, n));
		
	float nl = max(dot(n, l), 0);
	float rv = pow(max(dot(r, v), 0), 12);

	if(enableTexturing == 1){

		vec4 texColor = texture(textureMap0, iTexCoord);
		pixelColor = texColor;

	} else if(enableTexturing == 0)
		pixelColor = ambient + diffuse*nl  + specular*rv;

}
