#version 130

uniform vec4 ambient;
uniform vec4 diffuse;
uniform vec4 specular;

uniform sampler2D map_Kd;
uniform int enableTexturingD;

in vec4 inormal;
in vec2 iTexCoord;
in vec4 ilight;
in vec4 iv;

out vec4 pixelColor;

void main(void) {

	vec4 n = normalize(inormal);
	vec4 l = normalize(ilight);
	vec4 v = normalize(iv);
	vec4 r = normalize(reflect(-l, n));
		
	float nl = max(dot(n, l), 0);
	float rv = pow(max(dot(r, v), 0), 12);

	if(enableTexturingD == 1){

		vec4 texColor = texture(map_Kd, iTexCoord);
		pixelColor = texColor;

	} else
		pixelColor = ambient + diffuse*nl  + specular*rv;

}
